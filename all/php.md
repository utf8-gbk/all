未看 空间命名 email error



http://127.0.0.1:8080/a/1.php

PHP 脚本可以放在文档中的任何位置。

1.PHP 脚本以 **<?php** 开始，以 **?>** 结束：

2.PHP 中的每个代码行都必须以分号结束。分号是一种分隔符，用于把指令集区分开来。 

3.通过 PHP，有两种在浏览器输出文本的基础指令：**echo** 和 **print**。 

4.PHP 变量规则：

- 变量以 $ 符号开始，后面跟着变量的名称

- 变量名必须以字母或者下划线字符开始

- 变量名只能包含字母数字字符以及下划线（A-z、0-9 和 _ ）

- 变量名不能包含空格

- 变量名是区分大小写的（$y 和 $Y 是两个不同的变量）

  

5.**注释：**当您赋一个文本值给变量时，请在文本值两侧加上引号。 

6.

- local

- global  要使用全局变量 用global

- static  当一个函数完成时，它的所有变量通常都会被删除。然而，有时候您希望某个局部变量不要被删除。

  要做到这一点，请在您第一次声明变量时使用 **static** 关键字：

  然后，每次调用该函数时，该变量将会保留着函数前一次被调用时的值。

  **注释：**该变量仍然是函数的局部变量。

- parameter

  参数是通过调用代码将值传递给函数的局部变量。

  参数是在参数列表中声明的，作为函数声明的一部分：

7.在 php 中函数是有独立的作用域，所以局部变量会覆盖全局变量，即使局部变量中有全局变量相同的变量，也会被覆盖。 

8.echo 和 print 区别:

- echo - 可以输出一个或多个字符串
- print - 只允许输出一个字符串，返回值总为 1

**提示：**echo 输出的速度比 print 快， echo 没有返回值，print有返回值1。

9. EOF(heredoc)是一种在命令行shell（如sh、csh、ksh、bash、PowerShell和zsh）和程序语言（像Perl、PHP、Python和Ruby）里定义一个字串的方法。 
   - \1. 必须后接分号，否则编译通不过。
   - 2. **EOF** 可以用任意其它字符代替，只需保证结束标识与开始标识一致。
   - **3. 结束标识必须顶格独自占一行(即必须从行首开始，前后不能衔接任何空白和字符)。**
   - \4. 开始标识可以不带引号或带单双引号，不带引号与带双引号效果一致，解释内嵌的变量和转义符号，带单引号则不解释内嵌的变量和转义符号。
   - \5. 当内容需要内嵌引号（单引号或双引号）时，不需要加转义符，本身对单双引号转义，此处相当与q和qq的用法。

10.**var_dump()** 函数用于输出变量的相关信息。

**var_dump()** 函数显示关于一个或多个表达式的结构信息，包括表达式的类型与值。数组将递归展开值，通过缩进显示其结构。

11.常量是一个简单值的标识符。该值在脚本中不能改变。

一个常量由英文字母、下划线、和数字组成,但数字不能作为首字母出现。 (常量名不需要加 $ 修饰符)。

**注意：** 常量在整个脚本中都可以使用。

该函数有三个参数:

- **name：**必选参数，常量名称，即标志符。

- **value：**必选参数，常量的值。

- **case_insensitive** ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。

  

12.PHP 并置运算符

在 PHP 中，只有一个字符串运算符。

并置运算符 (.) 用于把两个字符串值连接起来。

13.PHP strlen() 函数

有时知道字符串值的长度是很有用的。

strlen() 函数返回字符串的长度（字符数）。

13.PHP strpos() 函数

strpos() 函数用于在字符串内查找一个字符或一段指定的文本。

如果在字符串中找到匹配，该函数会返回第一个匹配的字符位置。如果未找到匹配，则返回 FALSE

14.三元运算符

另一个条件运算符是"?:"（或三元）运算符 。

### 语法格式

```
(expr1) ? (expr2) : (expr3) 
```

对 expr1 求值为 TRUE 时的值为 expr2，在 expr1 求值为 FALSE 时的值为 expr3。

自 PHP 5.3 起，可以省略三元运算符中间那部分。表达式 expr1 ?: expr3 在 expr1 求值为 TRUE 时返回 expr1，否则返回 expr3。

注意:PHP_EOL 是一个换行符，兼容更大平台。 

？？ 与？：

15.组合比较符(PHP7+)

PHP7+ 支持组合比较符（combined comparison operator）也称之为太空船操作符，符号为 <=>。组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较。

- 如果 **$a > $b**, 则 **$c** 的值为 **1**。
- 如果 **$a == $b**, 则 **$c** 的值为 **0**。
- 如果 **$a < $b**, 则 **$c** 的值为 **-1**。





2019/3/5

16.在 PHP 中，有三种类型的数组：

- **数值数组** - 带有数字 ID 键的数组
- **关联数组** - 带有指定的键的数组，每个键关联一个值
- **多维数组** - 包含一个或多个数组的数组

count() 函数用于返回数组的长度（元素的数量

遍历并打印数值数组中的所有值，您可以使用 for 循环

遍历并打印关联数组中的所有值，您可以使用 foreach 循环

17.

- sort() - 对数组进行升序排列
- rsort() - 对数组进行降序排列
- asort() - 根据关联数组的值，对数组进行升序排列
- ksort() - 根据关联数组的键，对数组进行升序排列
- arsort() - 根据关联数组的值，对数组进行降序排列
- krsort() - 根据关联数组的键，对数组进行降序排列

18PHP 超级全局变量

PHP中预定义了几个超级全局变量（superglobals） ，这意味着它们在一个脚本的全部作用域中都可用。 你不需要特别说明，就可以在函数及类中使用。

PHP 超级全局变量列表:

- $GLOBALS
- $_SERVER
- $_REQUEST
- $_POST
- $_GET
- $_FILES
- $_ENV
- $_COOKIE
- $_SESSION

19.foreach 循环

foreach 循环用于遍历数组

每进行一次循环，当前数组元素的值就会被赋值给 $value 变量（数组指针会逐一地移动），在进行下一次循环时，您将看到数组中的下一个值。

20.PHP 魔术常量

PHP 向它运行的任何脚本提供了大量的预定义常量。

## __LINE__

文件中的当前行号。

## __FILE__

文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。

自 PHP 4.0.2 起，__FILE__ 总是包含一个绝对路径（如果是符号连接，则是解析后的绝对路径），而在此之前的版本有时会包含一个相对路径。

## __DIR__

文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。

## __FUNCTION__

函数名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该函数被定义时的名字（区分大小写）。在 PHP 4 中该值总是小写字母的。

## __CLASS__

类的名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该类被定义时的名字（区分大小写）。

## __TRAIT__

Trait 的名字（PHP 5.4.0 新加）。自 PHP 5.4.0 起，PHP 实现了代码复用的一个方法，称为 traits。

## __METHOD__

类的方法名（PHP 5.0.0 新加）。返回该方法被定义时的名字（区分大小写）。

## __NAMESPACE__

当前命名空间的名称（区分大小写）。此常量是在编译时定义的（PHP 5.3.0 新增）。

21.PHP 命名空间(namespace)

1. 用户编写的代码与PHP内部的类/函数/常量或第三方类/函数/常量之间的名字冲突。
2. 为很长的标识符名称(通常是为了缓解第一类问题而定义的)创建一个别名（或简短）的名称，提高源代码的可读性。

22.抽象类

任何一个类，如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的。

定义为抽象的类不能被实例化。

被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。

继承一个抽象类的时候，子类必须定义父类中的所有抽象方法；另外，这些方法的访问控制必须和父类中一样（或者更为宽松）。例如某个抽象方法被声明为受保护的，那么子类中实现的方法就应该声明为受保护的或者公有的，而不能定义为私有的。

23.Static 关键字

声明类属性或方法为 static(静态)，就可以不实例化类而直接访问。

24.Final 关键字

PHP 5 新增了一个 final 关键字。如果父类中的方法被声明为 final，则子类无法覆盖该方法。如果一个类被声明为 final，则不能被继承。

25.调用父类构造方法

PHP 不会在子类的构造方法中自动的调用父类的构造方法。要执行父类的构造方法，需要在子类的构造方法中调用 **parent::__construct()**

不写function __construct() 就自动继承 写了就会覆盖 要用父类的构造函数就要写parent::__construct()





26.PHP 表单处理

有一点很重要的事情值得注意，当处理 HTML 表单时，PHP 能把来自 HTML 页面中的表单元素自动变成可供 PHP 脚本使用。

27.PHP 表单验证

**什么是 $_SERVER["PHP_SELF"] 变量?**  $_SERVER["PHP_SELF"]是超级全局变量，返回当前正在执行脚本的文件名，与 document root相关。 

**什么是 htmlspecialchars()方法?**  

htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。 

使用 PHP trim() 函数去除用户输入数据中不必要的字符 (如：空格，tab，换行)。

使用PHP stripslashes()函数去除用户输入数据中的反斜杠 (\)

28.PHP 表单 - 必需字段

这些语句将检查 $_POST 变量是 否为空（使用php的 empty() 函数）。如果为空，将显示对应的错误信息。 如果不为空，数据将传递给test_input() 函数 

29.PHP 表单 - 验证邮件和URL

## PHP - 验证名称

```
$name = test_input($_POST["name"]);
if (!preg_match("/^[a-zA-Z ]*$/",$name)) {
  $nameErr = "只允许字母和空格"; 
}
```

| ![Note](http://www.runoob.com/images/lamp.jpg) | preg_match — 进行正则表达式匹配。  语法： **int preg_match ( string $pattern , string $subject [, array $matches [, int $flags ]] )** 在 subject 字符串中搜索与 pattern 给出的正则表达式相匹配的内容。如果提供了 matches ，则其会被搜索的结果所填充。$matches[0] 将包含与整个模式匹配的文本，$matches[1] 将包含与第一个捕获的括号中的子模式所匹配的文本，以此类推。 |
| ---------------------------------------------- | ------------------------------------------------------------ |
|                                                |                                                              |

## PHP - 验证邮件

以下代码将通过简单的方式来检测 e-mail 地址是否合法。如果 e-mail 地址不合法，将输出错误信息：

```
$email = test_input($_POST["email"]);
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/",$email)) {
  $emailErr = "非法邮箱格式"; 
}
```

## PHP - 验证 URL

以下代码将检测URL地址是否合法 (以下正则表达式运行URL中含有破折号:"-")， 如果 URL 地址不合法，将输出错误信息：

```
$website = test_input($_POST["website"]);
if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i",$website)) {
  $websiteErr = "非法的 URL 的地址"; 
}
```

30何时使用 method="get"？

在 HTML 表单中使用 method="get" 时，所有的变量名和值都会显示在 URL 中。

**注释：**所以在发送密码或其他敏感信息时，不应该使用这个方法！

然而，正因为变量显示在 URL 中，因此可以在收藏夹中收藏该页面。在某些情况下，这是很有用的。

**注释：**HTTP GET 方法不适合大型的变量值。它的值是不能超过 2000 个字符的。

31.何时使用 method="post"？

从带有 POST 方法的表单发送的信息，对任何人都是不可见的，并且对发送信息的量也没有限制。

然而，由于变量不显示在 URL 中，所以无法把页面加入书签。

32.PHP $_REQUEST 变量

预定义的 $_REQUEST 变量包含了 $_GET、$_POST 和 $_COOKIE 的内容。

$_REQUEST 变量可用来收集通过 GET 和 POST 方法发送的表单数据。

2019/3/6

33.PHP 多维数组 	

在多维数组中，主数组中的每一个元素也可以是一个数组，子数组中的每一个元素也可以是一个数组。 

34.PHP date() 函数

```
string date ( string $format [, int $timestamp ] )
```

 

| 参数      | 描述                                       |
| --------- | ------------------------------------------ |
| format    | 必需。规定时间戳的格式。                   |
| timestamp | 可选。规定时间戳。默认是当前的日期和时间。 |

35.PHP 中 include 和 require 的区别

require() 语句的性能与 include() 相类似，都是包括并运行指定文件。不同之处在于：对 include() 语句来说，在执行文件时每次都要进行读取和评估；而对于 require() 来说，文件只处理一次（实际上，文件内容替换 require() 语句）。这就意味着如果可能执行多次的代码，则使用 require() 效率比较高。另外一方面，如果每次执行代码时是读取不同的文件，或者有通过一组文件迭代的循环，就使用 include() 语句。 

**include** 引入文件的时候，如果碰到错误，会给出提示，并继续运行下边的代码。

**require** 引入文件的时候，如果碰到错误，会给出提示，并停止运行下边的代码。

36.PHP 文件处理

open() 函数用于在 PHP 中打开文件。

此函数的第一个参数含有要打开的文件的名称，第二个参数规定了使用哪种模式来打开文件：

| 模式 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| r    | 只读。在文件的开头开始。                                     |
| r+   | 读/写。在文件的开头开始。                                    |
| w    | 只写。打开并清空文件的内容；如果文件不存在，则创建新文件。   |
| w+   | 读/写。打开并清空文件的内容；如果文件不存在，则创建新文件。  |
| a    | 追加。打开并向文件末尾进行写操作，如果文件不存在，则创建新文件。 |
| a+   | 读/追加。通过向文件末尾写内容，来保持文件内容。              |
| x    | 只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。  |
| x+   | 读/写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。 |

37.关闭文件

fclose() 函数用于关闭打开的文件：

38.检测文件末尾（EOF）

if (feof($file)) echo "文件结尾"; 

38.逐行读取文件

fgets() 函数用于从文件中逐行读取文件。

**注释：**在调用该函数之后，文件指针会移动到下一行。

39.逐字符读取文件

fgetc() 函数用于从文件中逐字符地读取文件。

**注释：**在调用该函数之后，文件指针会移动到下一个字符。

下面的实例逐字符地读取文件，直到文件末尾为止：

<?php
$file=fopen("welcome.txt","r") or exit("无法打开文件!");
while (!feof($file))
{
    echo fgetc($file);
}
fclose($file);
?>

40.PHP 文件上传

有关上面的 HTML 表单的一些注意项列举如下：

- **<form>** 标签的 **enctype** 属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，请使用 "**multipart/form-data**"。

- **<input>** 标签的 **type="file"** 属性规定了应该把输入作为文件来处理。举例来说，当在浏览器中预览时，会看到输入框旁边有一个浏览按钮。

  

 41.创建上传脚本

通过使用 PHP 的全局数组 $_FILES，你可以从客户计算机向远程服务器上传文件。

第一个参数是表单的 input name，第二个下标可以是 "name"、"type"、"size"、"tmp_name" 或 "error"。如下所示：

- $_FILES["file"]["name"] - 上传文件的名称
- $_FILES["file"]["type"] - 上传文件的类型
- $_FILES["file"]["size"] - 上传文件的大小，以字节计
- $_FILES["file"]["tmp_name"] - 存储在服务器的文件的临时副本的名称
- $_FILES["file"]["error"] - 由文件上传导致的错误代码

42.xplode() 函数把字符串打散为数组。

注释："*separator*" 参数不能是空字符串。

注释：该函数是二进制安全的。

## 语法

```
explode(separator,string,limit)
```

| 参数        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| *separator* | 必需。规定在哪里分割字符串。                                 |
| *string*    | 必需。要分割的字符串。                                       |
| *limit*     | 可选。规定所返回的数组元素的数目。可能的值：大于 0 - 返回包含最多 *limit* 个元素的数组小于 0 - 返回包含除了最后的 -*limit* 个元素以外的所有元素的数组0 - 返回包含一个元素的数组 |

43.php end函数

输出数组中的当前元素和最后一个元素的值

44.file_exists() 函数检查文件或目录是否存在 

```
file_exists(path)
```

44.move_uploaded_file() 函数将上传的文件移动到新位置。

若成功，则返回 true，否则返回 false。

```
move_uploaded_file(file,newloc)
```

| 参数   | 描述                     |
| ------ | ------------------------ |
| file   | 必需。规定要移动的文件。 |
| newloc | 必需。规定文件的新位置。 |

45.保存被上传的文件

上面的实例在服务器的 PHP 临时文件夹中创建了一个被上传文件的临时副本。

这个临时的副本文件会在脚本结束时消失。要保存被上传的文件，我们需要把它拷贝到另外的位置：

46.PHP Cookie

------

cookie 常用于识别用户。

**注释：**setcookie() 函数必须位于 <html> 标签之前。 

cookie 常用于识别用户。cookie 是一种服务器留在用户计算机上的小文件。每当同一台计算机通过浏览器请求页面时，这台计算机将会发送 cookie。通过 PHP，您能够创建并取回 cookie 的值。 

```
setcookie(name, value, expire, path, domain);
```

47.如何取回 Cookie 的值？

PHP 的 $_COOKIE 变量用于取回 cookie 的值。

48如何删除 Cookie？

当删除 cookie 时，您应当使过期日期变更为过去的时间点。

48.PHP Session

PHP session 变量用于存储关于用户会话（session）的信息，或者更改用户会话（session）的设置。Session 变量存储单一用户的信息，并且对于应用程序中的所有页面都是可用的。

Session 的工作机制是：为每个访客创建一个唯一的 id (UID)，并基于这个 UID 来存储变量。UID 存储在 cookie 中，或者通过 URL 进行传导。

 **注释：**session_start() 函数必须位于 <html> 标签之前： 

## 存储 Session 变量

存储和取回 session 变量的正确方法是使用 PHP $_SESSION 变量：

## 销毁 Session

如果您希望删除某些 session 数据，可以使用 unset() 或 session_destroy() 函数。

unset() 函数用于释放指定的 session 变量：

**注释：**session_destroy() 将重置 session，您将失去所有已存储的 session 数据。 

49.PHP 错误处理

基本的错误处理：使用 die() 函数 	

由于它采用了一个简单的错误处理机制在错误之后终止了脚本。

然而，简单地终止脚本并不总是恰当的方式。

50.PHP MySQL 简介

语句 **set names utf8;**用于设定数据库编码，让中文可以正常显示。 

2019/3/7

51.数据库操作6步 

 1.连接数据库 mysql_connect  

2.选择数据库 mysql_select_db  

3.设置文件编码 mysql_query("set name utf-8")  

4.发送数据库操作指令 比如查询 mysql_query("select * from user");  

5.接收返回结果 这个很多,自己查手册  

6.释放资源,关闭数据库 mysql_free_result() mysql_close(); 

52.mysql_fetch_assoc(data)函数从结果集中取得一行作为关联数组。 data 必需。要使用的数据指针。该数据指针是从 mysql_query() 返回的结果。 

53.mysql_insert_id()

mysql_insert_id() 函数返回上一步 INSERT 操作产生的 ID。

如果上一查询没有产生 AUTO_INCREMENT 的 ID，则 mysql_insert_id() 返回 0。

54获取数据集中的一行数据 

可以通过设定参数MYSQL_NUM只获取数字索引数组，等同于mysql_fetch_row函数，如果设定参数为MYSQL_ASSOC则只获取关联索引数组，等同于mysql_fetch_assoc函数。 

```
$row = mysql_fetch_row($result);
$row = mysql_fetch_array($result, MYSQL_NUM); //这两个方法获取的数据是一样的
```

```
$row = mysql_fetch_assoc($result);
$row = mysql_fetch_array($result, MYSQL_ASSOC);
```

55.PHP数据库操作之查询分页数据

limit m,n表示从m行后取n行数据，在PHP中我们需要构造m与n来实现获取某一页的所有数据。 

56.如果要获取数据集中的所有数据，我们通过循环来遍历整个结果集。

```
$data = array();
while ($row = mysql_fetch_array($result)) {
    $data[] = $row;
}
```
56.对于删除与更新操作，可以通过mysql_affected_rows函数来获取更新过的数据行数，如果数据没有变化，则结果为0。 

57.在存在多个数据库连接的情况下，可以设定连接资源参数来关闭指定的数据库连接。

```
$link = mysql_connect($host, $user, $pass);
mysql_close($link);
```